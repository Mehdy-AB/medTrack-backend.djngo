# ============================================
# Traefik Dynamic Configuration
# ============================================
# IMPORTANT: Replace MACHINE_5_IP with the actual IP of your backend services machine
#
# Example: If Machine 5 IP is 192.168.1.105, replace all instances of MACHINE_5_IP

http:
  routers:
    auth-router:
      rule: "PathPrefix(`/auth`)"
      service: auth-service
      entryPoints:
        - web

    profile-router:
      rule: "PathPrefix(`/profile`)"
      service: profile-service
      entryPoints:
        - web

    core-router:
      rule: "PathPrefix(`/core`)"
      service: core-service
      entryPoints:
        - web

    eval-router:
      rule: "PathPrefix(`/eval`)"
      service: eval-service
      entryPoints:
        - web

    comm-router:
      rule: "PathPrefix(`/comm`)"
      service: comm-service
      entryPoints:
        - web

  services:
    auth-service:
      loadBalancer:
        servers:
          - url: "http://172.20.10.3:8001"

    profile-service:
      loadBalancer:
        servers:
          - url: "http://172.20.10.3:8002"

    core-service:
      loadBalancer:
        servers:
          - url: "http://172.20.10.3:8003"

    eval-service:
      loadBalancer:
        servers:
          - url: "http://172.20.10.3:8004"

    comm-service:
      loadBalancer:
        servers:
          - url: "http://172.20.10.3:8005"
